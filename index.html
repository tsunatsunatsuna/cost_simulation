<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>住まいの生涯コスト比較 Pro v16.6</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="container">
    <h2 style="text-align:center; font-size: 1.2rem; margin: 10px 0;">🏠 住まいの生涯コスト比較 Pro v16.6</h2>

    <div class="card">
        <label style="font-size:0.8rem; margin-bottom:8px;">1. 世帯・住宅ローン共通条件</label>
        <div class="grid">
            <div class="field"><label>金利 (%)</label><input type="number" id="global_rate" value="1.5" step="0.1"></div>
            <div class="field"><label>返済期間 (年)</label><input type="number" id="global_term" value="35"></div>
            <div class="field"><label>世帯区分</label><select id="is_child"><option value="0">通常世帯</option><option value="1" selected>子育て・若夫婦</option></select></div>
            <div class="field"><label>ローン人数</label><select id="is_pair"><option value="1">1名（単独）</option><option value="2" selected>2名（ペア）</option></select></div>
        </div>
    </div>

    <div class="card">
        <div class="tabs" id="tabGroup">
            <button class="tab-btn active" data-type="rent" onclick="UI.switchTab('rent', this)">賃貸</button>
            <button class="tab-btn" data-type="nm" onclick="UI.switchTab('nm', this)">新築マンション</button>
            <button class="tab-btn" data-type="om" onclick="UI.switchTab('om', this)">中古マンション</button>
            <button class="tab-btn" data-type="nh" onclick="UI.switchTab('nh', this)">新築戸建て</button>
            <button class="tab-btn" data-type="oh" onclick="UI.switchTab('oh', this)">中古戸建て</button>
        </div>
        <div id="input-area" class="grid"></div>
        <button id="runBtn" class="main-btn" onclick="UI.runSimulation()">全プランを比較計算する</button>
    </div>

    <div class="card">
        <div style="font-weight:bold; font-size:0.85rem; margin-bottom:12px;">プラン別 月額コスト（支払ベース）</div>
        <div id="comp_grid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px;"></div>
    </div>

    <div id="resultArea" style="display:none;" class="card">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div style="font-weight:bold;">生涯コストの推移シミュレーション</div>
            <button class="info-btn" onclick="UI.openModal()">i</button>
        </div>
        <div style="height: 380px; margin: 15px 0;"><canvas id="mainChart"></canvas></div>
        
        <div style="margin:20px 0 10px; padding:12px; background:#f1f5f9; border-radius:8px; display:inline-block;">
            <label style="display:inline; margin-right:8px;">表示切替:</label>
            <select id="exit_year" onchange="UI.runSimulation()">
                <option value="10">10年経過時点</option><option value="20">20年経過時点</option><option value="35" selected>35年経過時点</option><option value="50">50年経過時点</option>
            </select>
        </div>

        <div style="overflow-x:auto;">
            <table class="res-table" id="resTable">
                <thead>
                    <tr><th style="text-align:left">プラン</th><th>ローン計</th><th>初期費用</th><th>維持費計</th><th>控除計</th><th>資産価値</th><th>実質総負担</th></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div id="modalInfo" class="modal">
    <div class="modal-content">
        <h3 id="info-title"></h3>
        <div id="info-body"></div>
        <button onclick="UI.closeModal()" class="close-btn">内容を理解して閉じる</button>
    </div>
</div>

<script src="js/info-data.js"></script>
<script src="js/config.js"></script>
<script src="js/calc.js"></script>
<script src="js/ui-control.js"></script>
</body>
</html>
